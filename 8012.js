"use strict";(self.webpackChunkaisa=self.webpackChunkaisa||[]).push([[8012],{4140:(e,t,r)=>{r.d(t,{d:()=>o});var n=r(7552),a=r(7401),i=r(82),s=r(6075),l=r(3362);class o{back;down;front;left;right;up;texturedRenderingPipeline=new l.W(null);init(){return Promise.all([i.O.load(r(4167),!1).then((e=>this.back=e)),i.O.load(r(1237),!1).then((e=>this.down=e)),i.O.load(r(3661),!1).then((e=>this.front=e)),i.O.load(r(7796),!1).then((e=>this.left=e)),i.O.load(r(2488),!1).then((e=>this.right=e)),i.O.load(r(4046),!1).then((e=>this.up=e))]).then((()=>{this.back.setClamp(!0),this.down.setClamp(!0),this.front.setClamp(!0),this.left.setClamp(!0),this.right.setClamp(!0),this.up.setClamp(!0)}))}draw(e,t){this.texturedRenderingPipeline.setFramebuffer(e),this.drawSkyBox(e,t.getRotation())}drawSkyBox(e,t){const r=20,i=[this.back,this.left,this.front,this.right];let l,o,c;const u=[new n.l(1,1,-1,1),new n.l(-1,1,-1,1),new n.l(-1,-1,-1,1),new n.l(1,1,-1,1),new n.l(-1,-1,-1,1),new n.l(1,-1,-1,1)];for(let h=0;h<4;h++)l=t.multiplyMatrix(a.C.constructXRotationMatrix(Math.PI).multiplyMatrix(a.C.constructYRotationMatrix(2*+Math.PI/4*h))),o=l.multiplyMatrix(a.C.constructScaleMatrix(r,r,r)),c={points:u,points2:u.map((()=>new n.l(0,0,0))),uv:[new s.l(1,1),new s.l(0,1),new s.l(0,0),new s.l(1,1),new s.l(0,0),new s.l(1,0)],faces:[{vertices:[0,1,2],uv:[0,1,2]},{vertices:[3,4,5],uv:[3,4,5]}]},e.setTexture(i[h]),this.texturedRenderingPipeline.setFramebuffer(e),this.texturedRenderingPipeline.setModelViewMatrix(o),this.texturedRenderingPipeline.draw(e,c);l=t.multiplyMatrix(a.C.constructXRotationMatrix(Math.PI)).multiplyMatrix(a.C.constructYRotationMatrix(0).multiplyMatrix(a.C.constructYRotationMatrix(2*Math.PI/4*1).multiplyMatrix(a.C.constructXRotationMatrix(2*-Math.PI/4)))),o=l.multiplyMatrix(a.C.constructScaleMatrix(r,r,r)),c={points:u,points2:u.map((()=>new n.l(0,0,0))),uv:[new s.l(0,0),new s.l(1,0),new s.l(1,1),new s.l(0,0),new s.l(1,1),new s.l(0,1)],faces:[{vertices:[0,1,2],uv:[0,1,2]},{vertices:[3,4,5],uv:[3,4,5]}]},e.setTexture(this.up),this.texturedRenderingPipeline.setModelViewMatrix(o),this.texturedRenderingPipeline.draw(e,c),l=t.multiplyMatrix(a.C.constructXRotationMatrix(Math.PI)).multiplyMatrix(a.C.constructYRotationMatrix(0).multiplyMatrix(a.C.constructYRotationMatrix(2*Math.PI/2).multiplyMatrix(a.C.constructXRotationMatrix(2*Math.PI/4)))),o=l.multiplyMatrix(a.C.constructScaleMatrix(r,r,r)),c={points:u,points2:u.map((()=>new n.l(0,0,0))),uv:[new s.l(1,1),new s.l(0,1),new s.l(0,0),new s.l(1,1),new s.l(0,0),new s.l(1,0)],faces:[{vertices:[0,1,2],uv:[0,1,2]},{vertices:[3,4,5],uv:[3,4,5]}]},e.setTexture(this.down),this.texturedRenderingPipeline.setModelViewMatrix(o),this.texturedRenderingPipeline.draw(e,c)}}},5710:(e,t,r)=>{r.d(t,{H:()=>s});var n=r(7552),a=r(6075),i=r(7758);class s{static parse(e,t=!1){const r=[];return e.forEach((e=>{const a=new Array,i=new Array;e.vertices.forEach((e=>{a.push(new n.l(e.x,e.y,e.z).mul(1))})),e.normals.forEach((e=>{i.push(t?new n.l(e.x,e.y,e.z).normalize().mul(-1):new n.l(e.x,e.y,e.z).normalize())}));const s=[];e.faces.forEach((e=>{s.push({n1:e.normals[0],n2:e.normals[1],n3:e.normals[2],v1:e.vertices[0],v2:e.vertices[1],v3:e.vertices[2]})}));const l={faces:s,normals:i,points:a,transformedNormals:i.map((()=>new n.l(0,0,0,0))),transformedPoints:a.map((()=>new n.l(0,0,0,0)))};r.push(l)})),r}static getBlenderScene(e,t=!0){const r=[];return e.forEach((e=>{const s=new Array,l=new Array;let o;e.uv&&(o=[],e.uv.forEach((e=>{const t=new a.l;t.u=e.u,t.v=1-e.v,o.push(t)}))),e.vertices.forEach((e=>{t?s.push(new n.l(e.x,e.y,e.z).mul(2).add(new n.l(0,-2.7,0,0))):s.push(new n.l(e.x,e.y,e.z).mul(2))})),e.normals.forEach((e=>{l.push(new n.l(e.x,e.y,e.z))}));const c=(new i.o).computeBoundingSphere(s);c.getCenter().w=1;const u={points:s,normals:l,uv:o,faces:e.faces,points2:s.map((()=>new n.l(0,0,0,0))),normals2:l.map((()=>new n.l(0,0,0,0))),boundingSphere:c,name:e.name};r.push(u)})),r}}},8012:(e,t,r)=>{r.r(t),r.d(t,{Scene10:()=>x});var n=r(7574),a=r(7401),i=r(6852),s=r(9999),l=r(4140),o=r(82),c=r(8931),u=r(3362),h=r(518),d=r(4170);class p extends s.p{metalheadz;texture11;texture13;noise;dirt;skyBox;blenderObjMetal;accumulationBuffer;texturedRenderingPipeline;init(e){return this.texturedRenderingPipeline=new u.W(e),this.accumulationBuffer=new Uint32Array(e.width*e.height),e.setCullFace(n.u.BACK),this.skyBox=new l.d,Promise.all([this.skyBox.init(),h.v.loadWithTexture(r(2381)).then((e=>this.blenderObjMetal=e)),o.O.load(r(4338),!1).then((e=>this.metalheadz=e)),o.O.load(r(3935),!0).then((e=>this.texture11=e)),o.O.load(r(893),!0).then((e=>this.texture13=e)),o.O.generateProceduralNoise().then((e=>this.noise=e)),o.O.load(r(2259),!0).then((e=>this.dirt=e))])}render(e,t){this.texturedRenderingPipeline.setCullFace(n.u.BACK);const r=.2*t;e.clearDepthBuffer();const s=this.computeCameraMovement(r),l=s.multiplyMatrix(a.C.constructScaleMatrix(7,7,7));this.skyBox.draw(e,l),e.clearDepthBuffer(),e.setTexture(this.metalheadz);const o=this.texturedRenderingPipeline;o.setModelViewMatrix(l),o.drawMeshArray(e,this.blenderObjMetal);const u=e.project(s.getRotation().multiply(new i.r(22,40,-18)));d.E.drawLensFlare(e,u,1.2*r,[{tex:this.texture11,scale:2.3,alpha:.5},{tex:this.texture13,scale:1.6,alpha:.25},{tex:this.texture13,scale:.7,alpha:.22},{tex:this.texture13,scale:-.4,alpha:.22}],this.dirt);const h=new c.x(this.accumulationBuffer,e.width,e.height);e.drawTexture(0,0,h,.75),e.fastFramebufferCopy(this.accumulationBuffer,e.framebuffer),e.noise(t,this.noise)}computeCameraMovement(e){return a.C.constructTranslationMatrix(0,0,17*(.5*Math.sin(7e-5*e)+.5)-134).multiplyMatrix(a.C.constructXRotationMatrix(8e-4*e).multiplyMatrix(a.C.constructYRotationMatrix(9e-4*-e).multiplyMatrix(a.C.constructTranslationMatrix(0,0,0))))}}class x{MetalHeadzScene;init(e){return this.MetalHeadzScene=new p,Promise.all([this.MetalHeadzScene.init(e)])}render(e,t){this.MetalHeadzScene.render(e,t)}}},7758:(e,t,r)=>{r.d(t,{o:()=>i});var n=r(7552),a=r(6653);class i{computeBoundingSphere(e){if(0===e.length)throw new Error("More than one vertex required.");if(1===e.length)return new a.a(e[0],0);let t=new n.l(0,0,0,0),r=0;return e.forEach((e=>{t=t.add(new n.l(e.x,e.y,e.z,0))})),t=t.mul(1/e.length),e.forEach((e=>{r=Math.max(r,t.sub(e).length())})),new a.a(t,r)}}},6653:(e,t,r)=>{r.d(t,{a:()=>n});class n{center;radius;constructor(e,t){this.center=e,this.radius=t}isInsidePositiveHalfSpace(e){return e.getNormal().dot(this.center)-e.getDistance()>-this.radius}getTran(e){return e.multiplyHom(this.center)}getRadius(){return this.radius}getCenter(){return this.center}}},518:(e,t,r)=>{r.d(t,{v:()=>a});var n=r(5710);class a{static load(e){return fetch(e).then((e=>e.json())).then((e=>n.H.parse(e)))}static loadWithTexture(e){return fetch(e).then((e=>e.json())).then((e=>n.H.getBlenderScene(e,!1)))}constructor(){}}},4170:(e,t,r)=>{r.d(t,{E:()=>i});var n=r(6852),a=r(4737);class i{static drawLensFlare(e,t,r,i,s){const l=t;l.z<0&&l.x>0&&l.x<e.width&&l.y>0&&l.y<e.height&&e.wBuffer[l.x+l.y*e.width]>1/l.z?e.lensFlareVisible||(e.lensFlareVisible=!0,e.lensFlareStart=r):e.lensFlareVisible&&(e.lensFlareVisible=!1,e.lensFlareEnd=r);let o=a.p.interpolate(e.lensFlareStart,e.lensFlareStart+100,r);!0!==e.lensFlareVisible&&(o*=1-a.p.interpolate(e.lensFlareEnd,e.lensFlareEnd+100,r));const c=new n.r(e.width/2,e.height/2,0).sub(l);if(o>0)for(let t=0;t<i.length;t++){const r=l.add(c.mul(i[t].scale));e.drawTexture(Math.round(r.x)-i[t].tex.width/2,Math.round(r.y)-i[t].tex.height/2,i[t].tex,i[t].alpha*o)}e.drawScaledTextureClipBi(0,0,e.width,e.height,s,.15+.2*o*0)}}},893:(e,t,r)=>{e.exports=r.p+"8a09527b06eeee9b5298.png"},2259:(e,t,r)=>{e.exports=r.p+"59b860b8c26e2787d9a2.png"},2381:(e,t,r)=>{e.exports=r.p+"190c8de6aade7baacc90.jsx"},4338:(e,t,r)=>{e.exports=r.p+"dd142c00e8f6db275d9e.png"},3935:(e,t,r)=>{e.exports=r.p+"76ae06b027ad8d3a84d8.png"},4167:(e,t,r)=>{e.exports=r.p+"29fc676286325d45f7de.png"},1237:(e,t,r)=>{e.exports=r.p+"fe1ca8bac15e02a2d14c.png"},3661:(e,t,r)=>{e.exports=r.p+"780c7edd8a9410b8261f.png"},7796:(e,t,r)=>{e.exports=r.p+"c83bb5502d841707edd4.png"},2488:(e,t,r)=>{e.exports=r.p+"8f18731da1a9e273cf04.png"},4046:(e,t,r)=>{e.exports=r.p+"5cf778e15448cf90b764.png"}}]);
//# sourceMappingURL=8012.js.map