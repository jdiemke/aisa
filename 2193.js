"use strict";(self.webpackChunkaisa=self.webpackChunkaisa||[]).push([[2193],{2193:(t,e,a)=>{a.r(e),a.d(e,{Scene1:()=>r});var h=a(10);class r{PlaneDeformationFloorScene;init(t){return this.PlaneDeformationFloorScene=new h.v(8,a(2542)),Promise.all([this.PlaneDeformationFloorScene.init(t)])}render(t,e){this.PlaneDeformationFloorScene.drawPlaneDeformation(t,0,e>>3)}}},10:(t,e,a)=>{a.d(e,{v:()=>i});var h=a(82),r=a(1829),s=a(613);class i{effectStyle;texturePath;mLUT;texture;constructor(t,e){this.effectStyle=t,this.texturePath=e}onInit(){}init(t){return Promise.all([h.O.load(this.texturePath,!1).then((e=>{this.texture=e,this.createLUT(this.effectStyle,t.width,t.height,this.texture.width,this.texture.height)}))])}createLUT(t,e,a,h,r){this.mLUT=new Int32Array(3*e*a);let i=0,n=0,o=0,c=0;for(let l=0;l<a;l++){const f=2*l/a-1;for(let a=0;a<e;a++){const l=2*a/e-1,M=Math.sqrt(l*l+f*f),m=Math.atan2(f,l),u=M;switch(t){case 1:n=Math.cos(m)/M,o=Math.sin(m)/M,c=2/(6*u+3*l)*-50;break;case 2:o=Math.sin(m+Math.cos(3*u))/Math.pow(u,.2),n=Math.cos(m+Math.cos(3*u))/Math.pow(u,.2),c=1;break;case 3:o=2/(6*u+3*l),n=3*m/Math.PI,c=25*-o;break;case 4:o=-.4/u+.1*Math.sin(8*m),n=.5+.5*m/Math.PI,c=0;break;case 5:n=(.02*f+.03)*Math.cos(3*m)/u,o=(.02*f+.03)*Math.sin(3*m)/u,c=0;break;case 6:n=1/(u+.5+.5*Math.sin(5*m)),o=3*m/Math.PI,c=0;break;case 7:n=.1*l/(.11+.5*u),o=.1*f/(.11+.5*u),c=0;break;case 8:n=l/Math.abs(f),o=1/Math.abs(f),c=40*-o;break;case 9:n=.5*m/Math.PI,o=Math.sin(2*u),c=0;break;case 10:o=Math.pow(u,.1),n=1*m/Math.PI+u,c=0;break;case 11:o=l*(3-Math.sqrt(4-5*u*u))/(u*u+1),n=f*(3-Math.sqrt(4-5*u*u))/(u*u+1),c=-130.9*(l+f+u*u-(l+f-1)*Math.sqrt(4-5*u*u)/3)/(u*u+1);break;default:n=l,o=f,c=0}this.mLUT[i++]=h*n&h-1,this.mLUT[i++]=r*o&r-1,this.mLUT[i++]=s.c.clamp(c,-255,255)}}return Promise.all([])}render(t,e){this.drawPlaneDeformation(t,e>>3,e>>3)}drawPlaneDeformation(t,e,a){for(let h=0;h<t.framebuffer.length;h++){const i=(h<<1)+h,n=this.mLUT[i+0]+a,o=this.mLUT[i+1]+e,c=this.mLUT[i+2];let l=this.texture.texture[this.texture.width*(o&this.texture.height-1)+(n&this.texture.width-1)];if(0!==c){let t=255&l,e=l>>8&255,a=l>>16&255;t+=c,e+=c,a+=c,t=s.c.clamp(t,0,255),e=s.c.clamp(e,0,255),a=s.c.clamp(a,0,255),l=new r.I(t,e,a,255).toPackedFormat()}t.framebuffer[h]=l}}drawOldPlaneDeformationFloor(t,e){let a=0;for(let h=0;h<t.height;h++){const r=h-t.height/2,s=((1/Math.abs(r/100*.02)+.069*e)%256+256)%256,i=1-Math.min(1,1/Math.abs(r/10));for(let e=0;e<t.width;e++){const h=((e-t.width/2)/t.width/Math.abs(r/100*.02)%256+256)%256,n=this.texture.texture[(0|h)+256*(0|s)],o=(n>>0&255)*i|0,c=(n>>8&255)*i|0,l=(n>>16&255)*i|0;t.framebuffer[a++]=o|c<<8|l<<16|255<<24}}}drawOldPlaneDeformationStar(t,e){let a=0;for(let h=0;h<t.height;h++)for(let r=0;r<t.width;r++){const s=(r-t.width/2)/(t.width/2),i=(h-t.height/2)/(t.height/2),n=1,o=Math.atan2(i,s)+4e-4*e,c=128*(3*o/Math.PI+4e-4*e)%256,l=(1/(Math.sqrt(s*s+i*i)+.5+.5*Math.sin(5*o))*32+.03*e)%256,f=this.texture.texture[(0|l)+256*(0|c)],M=(f>>0&255)*n|0,m=(f>>8&255)*n|0,u=(f>>16&255)*n|0;t.framebuffer[a++]=M|m<<8|u<<16|255<<24}}}},2542:(t,e,a)=>{t.exports=a.p+"2b2983e86d6555fefb86.png"}}]);
//# sourceMappingURL=2193.js.map