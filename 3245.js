"use strict";(self.webpackChunkaisa=self.webpackChunkaisa||[]).push([[3245],{3245:(t,e,r)=>{r.r(e),r.d(e,{Scene19:()=>g});var i=r(7574),o=r(4377),n=r(9941),s=r(7552);class l extends n.l{constructor(){super();const t=.5*(1+Math.sqrt(5)),e=1/t,r=2-t,i=[new s.l(r,0,1),new s.l(-r,0,1),new s.l(-e,e,e),new s.l(0,1,r),new s.l(e,e,e),new s.l(e,-e,e),new s.l(0,-1,r),new s.l(-e,-e,e),new s.l(r,0,-1),new s.l(-r,0,-1),new s.l(-e,-e,-e),new s.l(0,-1,-r),new s.l(e,-e,-e),new s.l(e,e,-e),new s.l(0,1,-r),new s.l(-e,e,-e),new s.l(1,r,0),new s.l(-1,r,0),new s.l(-1,-r,0),new s.l(1,-r,0)];this.buildMesh(i,[0,4,1,1,3,2,1,4,3,1,7,0,0,6,5,0,7,6,8,12,9,9,11,10,9,12,11,9,15,8,8,14,13,8,15,14,14,3,13,13,4,16,13,3,4,3,14,2,2,15,17,2,14,15,11,6,10,10,7,18,10,6,7,6,11,5,5,12,19,5,11,12,16,4,19,19,0,5,19,4,0,19,12,16,16,8,13,16,12,8,17,15,18,18,9,10,18,15,9,18,7,17,17,1,2,17,7,1])}}class a extends n.l{constructor(){super();const t=.5,e=[new s.l(0,t,0),new s.l(t,-t,-t),new s.l(-t,-t,-t),new s.l(t,-t,t),new s.l(-t,-t,t)];this.buildMesh(e,[0,1,2,0,3,1,0,4,3,0,2,4])}}class h extends n.l{constructor(t=16,e=16){super();const r=[],i=t,o=e;for(let t=0;t<=i;t++)for(let e=0;e<o;e++)r.push(this.sphereFunction(-t*Math.PI/i-Math.PI/2,2*-e*Math.PI/o));const n=[];for(let t=0;t<i;t++)for(let e=0;e<o;e++)n.push(o*t+(1+e)%o),n.push(o*t+(0+e)%o),n.push(o*t+o+(1+e)%o),n.push(o*t+o+(0+e)%o),n.push(o*t+o+(1+e)%o),n.push(o*t+(0+e)%o);this.buildMesh(r,n)}sphereFunction(t,e){return new s.l(Math.cos(t)*Math.cos(e),Math.cos(t)*Math.sin(e),Math.sin(t),1)}}var c=r(7401),p=r(6852),u=r(9999),d=r(82),x=r(8931),f=r(1829),w=r(1762),m=r(4170);class y extends u.p{texture10;texture11;texture13;dirt;noise;cube;dodecahedron;pyramid;icosahedron;accumulationBuffer;renderingPipeline;init(t){return this.renderingPipeline=new w.M(t),this.accumulationBuffer=new Uint32Array(t.width*t.height),this.renderingPipeline.setCullFace(i.u.BACK),this.cube=new o.X,this.dodecahedron=new l,this.pyramid=new a,this.icosahedron=new h(6,10),Promise.all([d.O.load(r(9249),!0).then((t=>this.texture10=t)),d.O.load(r(6285),!0).then((t=>this.texture11=t)),d.O.load(r(6423),!0).then((t=>this.texture13=t)),d.O.load(r(288),!0).then((t=>this.dirt=t)),d.O.generateProceduralNoise().then((t=>this.noise=t))])}render(t,e){this.reproduceRazorScene(t,.0025*e,[{tex:this.texture10,scale:0,alpha:1},{tex:this.texture11,scale:2.3,alpha:.5},{tex:this.texture13,scale:1.6,alpha:.25},{tex:this.texture13,scale:.7,alpha:.22},{tex:this.texture13,scale:-.4,alpha:.22}],this.dirt);const r=new x.x(this.accumulationBuffer,t.width,t.height);t.drawScaledTextureClipBi(0,0,t.width,t.height,r,.75),t.fastFramebufferCopy(this.accumulationBuffer,t.framebuffer),t.noise(e,this.noise,.04)}reproduceRazorScene(t,e,r,i){let o;t.clearColorBuffer(-13617080),t.clearDepthBuffer();const n=c.C.constructTranslationMatrix(0,0,-6.4-5*(.5*Math.sin(.06*e)+.5)).multiplyMatrix(c.C.constructXRotationMatrix(.5*(.5*Math.sin(.08*e)+.5)).multiplyMatrix(c.C.constructYRotationMatrix(.1*e)));let s=2;o=c.C.constructYRotationMatrix(.2*e).multiplyMatrix(c.C.constructScaleMatrix(s,s,s)),o=c.C.constructTranslationMatrix(0,1,0).multiplyMatrix(o.multiplyMatrix(c.C.constructXRotationMatrix(.2*-e))),o=n.multiplyMatrix(o);let l=this.dodecahedron.getMesh();this.renderingPipeline.draw(t,l,o);const a=2.8;s=1,o=c.C.constructScaleMatrix(s,s,s),o=c.C.constructTranslationMatrix(a,-.5,a).multiplyMatrix(o),o=n.multiplyMatrix(o),l=this.icosahedron.getMesh(),this.renderingPipeline.draw(t,l,o),s=1,o=c.C.constructScaleMatrix(.5*s,2*s,.5*s),o=c.C.constructTranslationMatrix(-2.8,-.5,a).multiplyMatrix(o),o=n.multiplyMatrix(o),l=this.cube.getMesh(),this.renderingPipeline.draw(t,l,o),s=1,o=c.C.constructScaleMatrix(s,s,s),o=c.C.constructTranslationMatrix(a,-1,-2.8).multiplyMatrix(o),o=n.multiplyMatrix(o),l=this.cube.getMesh(),this.renderingPipeline.draw(t,l,o),s=1,o=c.C.constructScaleMatrix(s,s,s),o=c.C.constructTranslationMatrix(-2.8,-1,-2.8).multiplyMatrix(o),o=n.multiplyMatrix(o),l=this.pyramid.getMesh(),this.renderingPipeline.draw(t,l,o),this.renderingPipeline.enableLighting(!1),this.renderingPipeline.setColor(f.I.DARK_GRAY),s=2,o=c.C.constructYRotationMatrix(.2*e).multiplyMatrix(c.C.constructScaleMatrix(s,s,s)),o=c.C.constructTranslationMatrix(0,1,0).multiplyMatrix(o.multiplyMatrix(c.C.constructXRotationMatrix(.2*-e))),o=n.multiplyMatrix(c.C.constructShadowMatrix().multiplyMatrix(o)),this.renderingPipeline.draw(t,this.dodecahedron.getMesh(),o),s=1,o=c.C.constructScaleMatrix(s,s,s),o=c.C.constructTranslationMatrix(-2.8,-1,-2.8).multiplyMatrix(o),o=n.multiplyMatrix(c.C.constructShadowMatrix().multiplyMatrix(o)),this.renderingPipeline.draw(t,this.pyramid.getMesh(),o),s=1,o=c.C.constructScaleMatrix(s,s,s),o=c.C.constructTranslationMatrix(a,-1,-2.8).multiplyMatrix(o),o=n.multiplyMatrix(c.C.constructShadowMatrix().multiplyMatrix(o)),this.renderingPipeline.draw(t,this.cube.getMesh(),o),s=1,o=c.C.constructScaleMatrix(.5*s,2*s,.5*s),o=c.C.constructTranslationMatrix(-2.8,-.5,a).multiplyMatrix(o),o=n.multiplyMatrix(c.C.constructShadowMatrix().multiplyMatrix(o)),this.renderingPipeline.draw(t,this.cube.getMesh(),o),s=1,o=c.C.constructScaleMatrix(s,s,s),o=c.C.constructTranslationMatrix(a,-.5,a).multiplyMatrix(o),o=n.multiplyMatrix(c.C.constructShadowMatrix().multiplyMatrix(o)),this.renderingPipeline.draw(t,this.icosahedron.getMesh(),o),this.renderingPipeline.enableLighting(!0);const h=t.project(n.multiply(new p.r(12,4,0)));m.E.drawLensFlare(t,h,100*e,r,i)}}class g{RazorScene;init(t){return this.RazorScene=new y,Promise.all([this.RazorScene.init(t)])}render(t,e){this.RazorScene.render(t,e)}}},4377:(t,e,r)=>{r.d(e,{X:()=>n});var i=r(7552),o=r(9941);class n extends o.l{constructor(){super();const t=.5,e=[new i.l(-t,-t,-t),new i.l(t,-t,-t),new i.l(t,t,-t),new i.l(-t,t,-t),new i.l(-t,-t,t),new i.l(t,-t,t),new i.l(t,t,t),new i.l(-t,t,t)];this.buildMesh(e,[0,2,1,0,3,2,5,7,4,5,6,7,1,6,5,1,2,6,4,3,0,4,7,3,4,1,5,4,0,1,3,6,2,3,7,6])}}},312:(t,e,r)=>{r.d(e,{u:()=>o});var i=r(1829);class o{startColor=new i.I;colorSlope=new i.I;setup(t,e,r){this.colorSlope.r=(e.r-t.r)/r,this.colorSlope.g=(e.g-t.g)/r,this.colorSlope.b=(e.b-t.b)/r,this.startColor.r=t.r,this.startColor.g=t.g,this.startColor.b=t.b}advance(){this.startColor.r+=this.colorSlope.r,this.startColor.g+=this.colorSlope.g,this.startColor.b+=this.colorSlope.b}}},5110:(t,e,r)=>{r.d(e,{_:()=>s});var i=r(3242),o=r(312),n=r(1417);class s extends i.Y{framebuffer;colorInterpolator1=new o.u;colorInterpolator2=new o.u;colorInterpolator3=new o.u;rowColorInterpolator=new o.u;leftSlope=new n.N;rightSlope=new n.N;constructor(t){super(),this.framebuffer=t}fillLongRightTriangle(t,e,r,i){this.leftSlope.setup(e,r),this.rightSlope.setup(e,i),this.colorInterpolator1.setup(e.color,r.color,this.leftSlope.yDistance),this.colorInterpolator2.setup(e.color,i.color,this.rightSlope.yDistance),this.drawSpan(t,this.leftSlope,this.colorInterpolator1,this.colorInterpolator2,this.leftSlope,this.rightSlope),this.leftSlope.setup(r,i),this.colorInterpolator3.setup(r.color,i.color,this.leftSlope.yDistance),this.drawSpan(t,this.leftSlope,this.colorInterpolator3,this.colorInterpolator2,this.leftSlope,this.rightSlope)}fillLongLeftTriangle(t,e,r,i){this.leftSlope.setup(e,i),this.rightSlope.setup(e,r),this.colorInterpolator2.setup(e.color,r.color,this.rightSlope.yDistance),this.colorInterpolator1.setup(e.color,i.color,this.leftSlope.yDistance),this.drawSpan(t,this.rightSlope,this.colorInterpolator1,this.colorInterpolator2,this.leftSlope,this.rightSlope),this.rightSlope.setup(r,i),this.colorInterpolator3.setup(r.color,i.color,this.rightSlope.yDistance),this.drawSpan(t,this.rightSlope,this.colorInterpolator1,this.colorInterpolator3,this.leftSlope,this.rightSlope)}drawSpan(t,e,r,i,o,n){let s=e.yStart;for(let l=0;l<e.yDistance;l++){const e=Math.round(n.currentX)-Math.round(o.currentX);this.rowColorInterpolator.setup(r.startColor,i.startColor,e);let l=Math.round(s)*t.width+Math.round(o.currentX);const a=(n.currentZ-o.currentZ)/e;let h=o.currentZ;for(let r=0;r<e;r++)h<t.wBuffer[l]&&(t.wBuffer[l]=h,t.framebuffer[l]=this.rowColorInterpolator.startColor.toPackedFormat()),l++,h+=a,this.rowColorInterpolator.advance();o.advance(),n.advance(),r.advance(),i.advance(),s++}}}},1417:(t,e,r)=>{r.d(e,{N:()=>i});class i{yDistance;slope;zslope;currentZ;currentX;yStart;setup(t,e){this.yDistance=e.projection.y-t.projection.y,this.slope=(e.projection.x-t.projection.x)/this.yDistance,this.zslope=(1/e.projection.z-1/t.projection.z)/this.yDistance,this.currentZ=1/t.projection.z,this.currentX=t.projection.x,this.yStart=t.projection.y}advance(){this.currentX+=this.slope,this.currentZ+=this.zslope}}},1762:(t,e,r)=>{r.d(e,{M:()=>u});var i=r(1829),o=r(7552),n=r(160),s=r(9166),l=r(5084),a=r(5335),h=r(7569),c=r(5787),p=r(5110);class u extends c.U{fog=null;lights=null;material=null;lighting=!0;color=i.I.WHITE;triangleRasterizer=null;clipper;projectedVertices=new Array(new o.l(0,0,0,1),new o.l(0,0,0,1),new o.l(0,0,0,1));vertexArray=new Array(new h.X,new h.X,new h.X);constructor(t){super(t),this.clipper=new n.m(t);const e=new l.c;e.ambientIntensity=new o.l(1,1,1,1),e.diffuseIntensity=new o.l(1,1,1,1),e.specularIntensity=new o.l(1,1,1,1),e.position=new o.l(3,0,-2,1);const r=new l.c;r.ambientIntensity=new o.l(0,0,1,1),r.diffuseIntensity=new o.l(0,.6,1,1),r.specularIntensity=new o.l(.8,.8,.8,1),r.position=new o.l(0,-380,-180,1),this.lights=[e,r];const i=new a.F;i.ambientColor=new o.l(.12,.14,.1,0),i.diffuseColor=new o.l(.38,.4,.4,1),i.specularColor=new o.l(.8,.5,.5,0),i.shininess=2,this.material=i,this.triangleRasterizer=new p._(t)}setFramebuffer(t){this.framebuffer=t}setFog(t){this.fog=t}setLights(t){this.lights=t}enableLighting(t){this.lighting=t}setMaterial(t){this.material=t}setColor(t){this.color=t}drawMeshArray(t,e,r){for(let i=0;i<e.length;i++){const o=e[i];this.draw(t,o,r)}}draw(t,e,r){const i=r.computeNormalMatrix();for(let t=0;t<e.normals.length;t++)i.multiplyHomArr(e.normals[t],e.transformedNormals[t]);for(let t=0;t<e.points.length;t++)r.multiplyHomArr(e.points[t],e.transformedPoints[t]);for(let r=0;r<e.faces.length;r++){const i=e.transformedPoints[e.faces[r].v1],o=e.transformedPoints[e.faces[r].v2],n=e.transformedPoints[e.faces[r].v3],s=e.transformedNormals[e.faces[r].n1],l=e.transformedNormals[e.faces[r].n2],a=e.transformedNormals[e.faces[r].n3];if(this.isInFrontOfNearPlane(i)&&this.isInFrontOfNearPlane(o)&&this.isInFrontOfNearPlane(n))this.project2(i,this.projectedVertices[0]),this.project2(o,this.projectedVertices[1]),this.project2(n,this.projectedVertices[2]),this.vertexArray[0].position=i,this.vertexArray[0].projection=this.projectedVertices[0],this.vertexArray[0].normal=s,this.vertexArray[1].position=o,this.vertexArray[1].projection=this.projectedVertices[1],this.vertexArray[1].normal=l,this.vertexArray[2].position=n,this.vertexArray[2].projection=this.projectedVertices[2],this.vertexArray[2].normal=a,this.renderConvexPolygon(t,this.vertexArray,!0);else{if(!(this.isInFrontOfNearPlane(i)||this.isInFrontOfNearPlane(o)||this.isInFrontOfNearPlane(n)))continue;{this.vertexArray[0].position=i,this.vertexArray[1].position=o,this.vertexArray[2].position=n,this.lighting?(this.vertexArray[0].color=this.computeColor(s,i),this.vertexArray[1].color=this.computeColor(l,o),this.vertexArray[2].color=this.computeColor(a,n)):(this.vertexArray[0].color=this.color,this.vertexArray[1].color=this.color,this.vertexArray[2].color=this.color);const e=this.zClipTriangle(this.vertexArray);if(e.length<3)return;for(let t=0;t<e.length;t++)e[t].projection=this.project(e[t].position);this.renderConvexPolygon(t,e,!1)}}}}project(t){return new o.l(Math.round(this.framebuffer.width/2+292*t.x/-t.z),Math.round(this.framebuffer.height/2-292*t.y/-t.z),t.z)}project2(t,e){e.x=Math.round(this.framebuffer.width/2+292*t.x/-t.z),e.y=Math.round(this.framebuffer.height/2-292*t.y/-t.z),e.z=t.z}computeNearPlaneIntersection(t,e){const r=(this.NEAR_PLANE_Z-t.position.z)/(e.position.z-t.position.z),i=new h.X;return i.position=new o.l(r*(e.position.x-t.position.x)+t.position.x,r*(e.position.y-t.position.y)+t.position.y,this.NEAR_PLANE_Z),i.color=e.color.sub(t.color).mul(r).add(t.color),i}zClipTriangle(t){const e=t,r=new Array;let i=e[e.length-1];for(let t=0;t<e.length;t++){const o=e[t];this.isInFrontOfNearPlane(o.position)?(this.isInFrontOfNearPlane(i.position)||r.push(this.computeNearPlaneIntersection(i,o)),r.push(o)):this.isInFrontOfNearPlane(i.position)&&r.push(this.computeNearPlaneIntersection(i,o)),i=o}return r}renderConvexPolygon(t,e,r=!1){if(3===e.length&&!this.isTriangleCCW(e[0].projection,e[1].projection,e[2].projection))return;if(r&&(this.lighting?(this.vertexArray[0].color=this.computeColor(this.vertexArray[0].normal,this.vertexArray[0].position),this.vertexArray[1].color=this.computeColor(this.vertexArray[1].normal,this.vertexArray[1].position),this.vertexArray[2].color=this.computeColor(this.vertexArray[2].normal,this.vertexArray[2].position)):(this.vertexArray[0].color=this.color,this.vertexArray[1].color=this.color,this.vertexArray[2].color=this.color)),4===e.length&&!this.isTriangleCCW2(e[0].projection,e[1].projection,e[2].projection,e[3].projection))return;const i=this.clipper.clipConvexPolygon(e);i.length<3||this.triangulateConvexPolygon(t,i)}triangulateConvexPolygon(t,e){for(let r=0;r<e.length-2;r++)this.triangleRasterizer.drawTriangleDDA(t,e[0],e[1+r],e[2+r])}computeColor(t,e){let r=(new s.R).computeColor(this.material,this.lights,t,e);return null!==this.fog&&(r=this.fog.computeVertexColor(r,e)),new i.I(Math.min(255,255*r.x),Math.min(255,255*r.y),Math.min(255,255*r.z),255)}}},160:(t,e,r)=>{r.d(e,{m:()=>l});var i=r(9137),o=r(477),n=r(6076),s=r(9936);class l{framebuffer;clipRegion;constructor(t){this.framebuffer=t,this.clipRegion=new Array(new i.N(t),new o.c(t),new n.$(t),new s.E(t))}clipConvexPolygon(t){let e=t;for(let t=0;t<this.clipRegion.length;t++){const r=this.clipRegion[t],i=e;e=new Array;let o=i[i.length-1];for(let t=0;t<i.length;t++){const n=i[t];r.isInside(n)?(r.isInside(o)||e.push(r.computeIntersection(o,n)),e.push(n)):r.isInside(o)&&e.push(r.computeIntersection(o,n)),o=n}}return e}}},9166:(t,e,r)=>{r.d(e,{R:()=>o});var i=r(7552);class o{computeColor(t,e,r,o){let n=new i.l(0,0,0);for(let i=0;i<e.length;i++){const s=e[i],l=this.computeAmbientIntensity(t,s),a=this.computeDiffuseIntensity(t,s,r,o),h=this.computeSpecularIntensity(t,s,r,o);n=n.add(l).add(a).add(h)}return n}computeAmbientIntensity(t,e){return t.ambientColor.componentWiseMul(e.ambientIntensity)}computeDiffuseIntensity(t,e,r,i){const o=e.position.sub(i).normalize(),n=Math.min(Math.max(r.dot(o),0),1);return t.diffuseColor.componentWiseMul(e.diffuseIntensity).mul(n)}computeSpecularIntensity(t,e,r,i){const o=e.position.sub(i).normalize(),n=r.mul(2*r.dot(o)).sub(o),s=i.mul(-1).normalize(),l=Math.pow(Math.max(n.dot(s),0),t.shininess);return t.specularColor.componentWiseMul(e.specularIntensity).mul(l)}}},9866:(t,e,r)=>{r.d(e,{_:()=>i});class i{ambientIntensity;diffuseIntensity;specularIntensity}},5084:(t,e,r)=>{r.d(e,{c:()=>o});var i=r(9866);class o extends i._{position}},5335:(t,e,r)=>{r.d(e,{F:()=>i});class i{ambientColor;diffuseColor;specularColor;emissiveColor;shininess}},4170:(t,e,r)=>{r.d(e,{E:()=>n});var i=r(6852),o=r(4737);class n{static drawLensFlare(t,e,r,n,s){const l=e;l.z<0&&l.x>0&&l.x<t.width&&l.y>0&&l.y<t.height&&t.wBuffer[l.x+l.y*t.width]>1/l.z?t.lensFlareVisible||(t.lensFlareVisible=!0,t.lensFlareStart=r):t.lensFlareVisible&&(t.lensFlareVisible=!1,t.lensFlareEnd=r);let a=o.p.interpolate(t.lensFlareStart,t.lensFlareStart+100,r);!0!==t.lensFlareVisible&&(a*=1-o.p.interpolate(t.lensFlareEnd,t.lensFlareEnd+100,r));const h=new i.r(t.width/2,t.height/2,0).sub(l);if(a>0)for(let e=0;e<n.length;e++){const r=l.add(h.mul(n[e].scale));t.drawTexture(Math.round(r.x)-n[e].tex.width/2,Math.round(r.y)-n[e].tex.height/2,n[e].tex,n[e].alpha*a)}t.drawScaledTextureClipBi(0,0,t.width,t.height,s,.15+.2*a*0)}}},6423:(t,e,r)=>{t.exports=r.p+"8a09527b06eeee9b5298.png"},288:(t,e,r)=>{t.exports=r.p+"59b860b8c26e2787d9a2.png"},6285:(t,e,r)=>{t.exports=r.p+"76ae06b027ad8d3a84d8.png"},9249:(t,e,r)=>{t.exports=r.p+"64c8d0e56a947ade8a44.png"}}]);
//# sourceMappingURL=3245.js.map