"use strict";(self.webpackChunkaisa=self.webpackChunkaisa||[]).push([[1935],{5710:(t,e,r)=>{r.d(e,{H:()=>i});var o=r(7552),s=r(6075),n=r(7758);class i{static parse(t,e=!1){const r=[];return t.forEach((t=>{const s=new Array,n=new Array;t.vertices.forEach((t=>{s.push(new o.l(t.x,t.y,t.z).mul(1))})),t.normals.forEach((t=>{n.push(e?new o.l(t.x,t.y,t.z).normalize().mul(-1):new o.l(t.x,t.y,t.z).normalize())}));const i=[];t.faces.forEach((t=>{i.push({n1:t.normals[0],n2:t.normals[1],n3:t.normals[2],v1:t.vertices[0],v2:t.vertices[1],v3:t.vertices[2]})}));const l={faces:i,normals:n,points:s,transformedNormals:n.map((()=>new o.l(0,0,0,0))),transformedPoints:s.map((()=>new o.l(0,0,0,0)))};r.push(l)})),r}static getBlenderScene(t,e=!0){const r=[];return t.forEach((t=>{const i=new Array,l=new Array;let a;t.uv&&(a=[],t.uv.forEach((t=>{const e=new s.l;e.u=t.u,e.v=1-t.v,a.push(e)}))),t.vertices.forEach((t=>{e?i.push(new o.l(t.x,t.y,t.z).mul(2).add(new o.l(0,-2.7,0,0))):i.push(new o.l(t.x,t.y,t.z).mul(2))})),t.normals.forEach((t=>{l.push(new o.l(t.x,t.y,t.z))}));const h=(new n.o).computeBoundingSphere(i);h.getCenter().w=1;const c={points:i,normals:l,uv:a,faces:t.faces,points2:i.map((()=>new o.l(0,0,0,0))),normals2:l.map((()=>new o.l(0,0,0,0))),boundingSphere:h,name:t.name};r.push(c)})),r}}},1935:(t,e,r)=>{r.r(e),r.d(e,{Scene14:()=>p});var o=r(7574),s=r(7401),n=r(1762),i=r(9999),l=r(8931),a=r(82),h=r(518);class c extends i.p{blurred;noise;gearsMesh;accumulationBuffer;renderingPipeline;init(t){return this.accumulationBuffer=new Uint32Array(t.width*t.height),this.renderingPipeline=new n.M(t),this.renderingPipeline.setCullFace(o.u.FRONT),Promise.all([h.v.load(r(4224)).then((t=>this.gearsMesh=t)),a.O.load(r(4232),!1).then((t=>this.blurred=t)),a.O.generateProceduralNoise().then((t=>this.noise=t))])}render(t,e){t.drawScaledTextureClipBi(0,0,t.width,t.height,this.blurred,1),this.drawBlenderScene4(t,e);const r=new l.x(this.accumulationBuffer,t.width,t.height);t.drawTexture(0,0,r,.75),t.fastFramebufferCopy(this.accumulationBuffer,t.framebuffer),t.noise(e,this.noise)}drawBlenderScene4(t,e){t.clearDepthBuffer();const r=s.C.constructTranslationMatrix(0,0,-21).multiplyMatrix(s.C.constructYRotationMatrix(2e-4*e).multiplyMatrix(s.C.constructXRotationMatrix(2e-4*e)));let o=.1*2.1*2.1,n=2.1-.09-.09;const i=.5*Math.sin(1e-5*e)+.5;for(let s=1;s<6;s++){o*=n,n-=.09;const l=this.getModelViewMatrix(r,i,o,s,e);this.renderingPipeline.draw(t,this.gearsMesh[0],l)}}getModelViewMatrix(t,e,r,o,n){const i=s.C.constructXRotationMatrix(6e-4*n+.7*e*(4-o)).multiplyMatrix(s.C.constructYRotationMatrix(5e-4*n+.7*e*(4-o)).multiplyMatrix(s.C.constructScaleMatrix(r,r,r)));return t.multiplyMatrix(i)}}class p{GearsScene;init(t){return this.GearsScene=new c,Promise.all([this.GearsScene.init(t)])}render(t,e){this.GearsScene.render(t,e)}}},7758:(t,e,r)=>{r.d(e,{o:()=>n});var o=r(7552),s=r(6653);class n{computeBoundingSphere(t){if(0===t.length)throw new Error("More than one vertex required.");if(1===t.length)return new s.a(t[0],0);let e=new o.l(0,0,0,0),r=0;return t.forEach((t=>{e=e.add(new o.l(t.x,t.y,t.z,0))})),e=e.mul(1/t.length),t.forEach((t=>{r=Math.max(r,e.sub(t).length())})),new s.a(e,r)}}},6653:(t,e,r)=>{r.d(e,{a:()=>o});class o{center;radius;constructor(t,e){this.center=t,this.radius=e}isInsidePositiveHalfSpace(t){return t.getNormal().dot(this.center)-t.getDistance()>-this.radius}getTran(t){return t.multiplyHom(this.center)}getRadius(){return this.radius}getCenter(){return this.center}}},518:(t,e,r)=>{r.d(e,{v:()=>s});var o=r(5710);class s{static load(t){return fetch(t).then((t=>t.json())).then((t=>o.H.parse(t)))}static loadWithTexture(t){return fetch(t).then((t=>t.json())).then((t=>o.H.getBlenderScene(t,!1)))}constructor(){}}},312:(t,e,r)=>{r.d(e,{u:()=>s});var o=r(1829);class s{startColor=new o.I;colorSlope=new o.I;setup(t,e,r){this.colorSlope.r=(e.r-t.r)/r,this.colorSlope.g=(e.g-t.g)/r,this.colorSlope.b=(e.b-t.b)/r,this.startColor.r=t.r,this.startColor.g=t.g,this.startColor.b=t.b}advance(){this.startColor.r+=this.colorSlope.r,this.startColor.g+=this.colorSlope.g,this.startColor.b+=this.colorSlope.b}}},5110:(t,e,r)=>{r.d(e,{_:()=>i});var o=r(3242),s=r(312),n=r(1417);class i extends o.Y{framebuffer;colorInterpolator1=new s.u;colorInterpolator2=new s.u;colorInterpolator3=new s.u;rowColorInterpolator=new s.u;leftSlope=new n.N;rightSlope=new n.N;constructor(t){super(),this.framebuffer=t}fillLongRightTriangle(t,e,r,o){this.leftSlope.setup(e,r),this.rightSlope.setup(e,o),this.colorInterpolator1.setup(e.color,r.color,this.leftSlope.yDistance),this.colorInterpolator2.setup(e.color,o.color,this.rightSlope.yDistance),this.drawSpan(t,this.leftSlope,this.colorInterpolator1,this.colorInterpolator2,this.leftSlope,this.rightSlope),this.leftSlope.setup(r,o),this.colorInterpolator3.setup(r.color,o.color,this.leftSlope.yDistance),this.drawSpan(t,this.leftSlope,this.colorInterpolator3,this.colorInterpolator2,this.leftSlope,this.rightSlope)}fillLongLeftTriangle(t,e,r,o){this.leftSlope.setup(e,o),this.rightSlope.setup(e,r),this.colorInterpolator2.setup(e.color,r.color,this.rightSlope.yDistance),this.colorInterpolator1.setup(e.color,o.color,this.leftSlope.yDistance),this.drawSpan(t,this.rightSlope,this.colorInterpolator1,this.colorInterpolator2,this.leftSlope,this.rightSlope),this.rightSlope.setup(r,o),this.colorInterpolator3.setup(r.color,o.color,this.rightSlope.yDistance),this.drawSpan(t,this.rightSlope,this.colorInterpolator1,this.colorInterpolator3,this.leftSlope,this.rightSlope)}drawSpan(t,e,r,o,s,n){let i=e.yStart;for(let l=0;l<e.yDistance;l++){const e=Math.round(n.currentX)-Math.round(s.currentX);this.rowColorInterpolator.setup(r.startColor,o.startColor,e);let l=Math.round(i)*t.width+Math.round(s.currentX);const a=(n.currentZ-s.currentZ)/e;let h=s.currentZ;for(let r=0;r<e;r++)h<t.wBuffer[l]&&(t.wBuffer[l]=h,t.framebuffer[l]=this.rowColorInterpolator.startColor.toPackedFormat()),l++,h+=a,this.rowColorInterpolator.advance();s.advance(),n.advance(),r.advance(),o.advance(),i++}}}},1417:(t,e,r)=>{r.d(e,{N:()=>o});class o{yDistance;slope;zslope;currentZ;currentX;yStart;setup(t,e){this.yDistance=e.projection.y-t.projection.y,this.slope=(e.projection.x-t.projection.x)/this.yDistance,this.zslope=(1/e.projection.z-1/t.projection.z)/this.yDistance,this.currentZ=1/t.projection.z,this.currentX=t.projection.x,this.yStart=t.projection.y}advance(){this.currentX+=this.slope,this.currentZ+=this.zslope}}},1762:(t,e,r)=>{r.d(e,{M:()=>u});var o=r(1829),s=r(7552),n=r(160),i=r(9166),l=r(5084),a=r(5335),h=r(7569),c=r(5787),p=r(5110);class u extends c.U{fog=null;lights=null;material=null;lighting=!0;color=o.I.WHITE;triangleRasterizer=null;clipper;projectedVertices=new Array(new s.l(0,0,0,1),new s.l(0,0,0,1),new s.l(0,0,0,1));vertexArray=new Array(new h.X,new h.X,new h.X);constructor(t){super(t),this.clipper=new n.m(t);const e=new l.c;e.ambientIntensity=new s.l(1,1,1,1),e.diffuseIntensity=new s.l(1,1,1,1),e.specularIntensity=new s.l(1,1,1,1),e.position=new s.l(3,0,-2,1);const r=new l.c;r.ambientIntensity=new s.l(0,0,1,1),r.diffuseIntensity=new s.l(0,.6,1,1),r.specularIntensity=new s.l(.8,.8,.8,1),r.position=new s.l(0,-380,-180,1),this.lights=[e,r];const o=new a.F;o.ambientColor=new s.l(.12,.14,.1,0),o.diffuseColor=new s.l(.38,.4,.4,1),o.specularColor=new s.l(.8,.5,.5,0),o.shininess=2,this.material=o,this.triangleRasterizer=new p._(t)}setFramebuffer(t){this.framebuffer=t}setFog(t){this.fog=t}setLights(t){this.lights=t}enableLighting(t){this.lighting=t}setMaterial(t){this.material=t}setColor(t){this.color=t}drawMeshArray(t,e,r){for(let o=0;o<e.length;o++){const s=e[o];this.draw(t,s,r)}}draw(t,e,r){const o=r.computeNormalMatrix();for(let t=0;t<e.normals.length;t++)o.multiplyHomArr(e.normals[t],e.transformedNormals[t]);for(let t=0;t<e.points.length;t++)r.multiplyHomArr(e.points[t],e.transformedPoints[t]);for(let r=0;r<e.faces.length;r++){const o=e.transformedPoints[e.faces[r].v1],s=e.transformedPoints[e.faces[r].v2],n=e.transformedPoints[e.faces[r].v3],i=e.transformedNormals[e.faces[r].n1],l=e.transformedNormals[e.faces[r].n2],a=e.transformedNormals[e.faces[r].n3];if(this.isInFrontOfNearPlane(o)&&this.isInFrontOfNearPlane(s)&&this.isInFrontOfNearPlane(n))this.project2(o,this.projectedVertices[0]),this.project2(s,this.projectedVertices[1]),this.project2(n,this.projectedVertices[2]),this.vertexArray[0].position=o,this.vertexArray[0].projection=this.projectedVertices[0],this.vertexArray[0].normal=i,this.vertexArray[1].position=s,this.vertexArray[1].projection=this.projectedVertices[1],this.vertexArray[1].normal=l,this.vertexArray[2].position=n,this.vertexArray[2].projection=this.projectedVertices[2],this.vertexArray[2].normal=a,this.renderConvexPolygon(t,this.vertexArray,!0);else{if(!(this.isInFrontOfNearPlane(o)||this.isInFrontOfNearPlane(s)||this.isInFrontOfNearPlane(n)))continue;{this.vertexArray[0].position=o,this.vertexArray[1].position=s,this.vertexArray[2].position=n,this.lighting?(this.vertexArray[0].color=this.computeColor(i,o),this.vertexArray[1].color=this.computeColor(l,s),this.vertexArray[2].color=this.computeColor(a,n)):(this.vertexArray[0].color=this.color,this.vertexArray[1].color=this.color,this.vertexArray[2].color=this.color);const e=this.zClipTriangle(this.vertexArray);if(e.length<3)return;for(let t=0;t<e.length;t++)e[t].projection=this.project(e[t].position);this.renderConvexPolygon(t,e,!1)}}}}project(t){return new s.l(Math.round(this.framebuffer.width/2+292*t.x/-t.z),Math.round(this.framebuffer.height/2-292*t.y/-t.z),t.z)}project2(t,e){e.x=Math.round(this.framebuffer.width/2+292*t.x/-t.z),e.y=Math.round(this.framebuffer.height/2-292*t.y/-t.z),e.z=t.z}computeNearPlaneIntersection(t,e){const r=(this.NEAR_PLANE_Z-t.position.z)/(e.position.z-t.position.z),o=new h.X;return o.position=new s.l(r*(e.position.x-t.position.x)+t.position.x,r*(e.position.y-t.position.y)+t.position.y,this.NEAR_PLANE_Z),o.color=e.color.sub(t.color).mul(r).add(t.color),o}zClipTriangle(t){const e=t,r=new Array;let o=e[e.length-1];for(let t=0;t<e.length;t++){const s=e[t];this.isInFrontOfNearPlane(s.position)?(this.isInFrontOfNearPlane(o.position)||r.push(this.computeNearPlaneIntersection(o,s)),r.push(s)):this.isInFrontOfNearPlane(o.position)&&r.push(this.computeNearPlaneIntersection(o,s)),o=s}return r}renderConvexPolygon(t,e,r=!1){if(3===e.length&&!this.isTriangleCCW(e[0].projection,e[1].projection,e[2].projection))return;if(r&&(this.lighting?(this.vertexArray[0].color=this.computeColor(this.vertexArray[0].normal,this.vertexArray[0].position),this.vertexArray[1].color=this.computeColor(this.vertexArray[1].normal,this.vertexArray[1].position),this.vertexArray[2].color=this.computeColor(this.vertexArray[2].normal,this.vertexArray[2].position)):(this.vertexArray[0].color=this.color,this.vertexArray[1].color=this.color,this.vertexArray[2].color=this.color)),4===e.length&&!this.isTriangleCCW2(e[0].projection,e[1].projection,e[2].projection,e[3].projection))return;const o=this.clipper.clipConvexPolygon(e);o.length<3||this.triangulateConvexPolygon(t,o)}triangulateConvexPolygon(t,e){for(let r=0;r<e.length-2;r++)this.triangleRasterizer.drawTriangleDDA(t,e[0],e[1+r],e[2+r])}computeColor(t,e){let r=(new i.R).computeColor(this.material,this.lights,t,e);return null!==this.fog&&(r=this.fog.computeVertexColor(r,e)),new o.I(Math.min(255,255*r.x),Math.min(255,255*r.y),Math.min(255,255*r.z),255)}}},160:(t,e,r)=>{r.d(e,{m:()=>l});var o=r(9137),s=r(477),n=r(6076),i=r(9936);class l{framebuffer;clipRegion;constructor(t){this.framebuffer=t,this.clipRegion=new Array(new o.N(t),new s.c(t),new n.$(t),new i.E(t))}clipConvexPolygon(t){let e=t;for(let t=0;t<this.clipRegion.length;t++){const r=this.clipRegion[t],o=e;e=new Array;let s=o[o.length-1];for(let t=0;t<o.length;t++){const n=o[t];r.isInside(n)?(r.isInside(s)||e.push(r.computeIntersection(s,n)),e.push(n)):r.isInside(s)&&e.push(r.computeIntersection(s,n)),s=n}}return e}}},9166:(t,e,r)=>{r.d(e,{R:()=>s});var o=r(7552);class s{computeColor(t,e,r,s){let n=new o.l(0,0,0);for(let o=0;o<e.length;o++){const i=e[o],l=this.computeAmbientIntensity(t,i),a=this.computeDiffuseIntensity(t,i,r,s),h=this.computeSpecularIntensity(t,i,r,s);n=n.add(l).add(a).add(h)}return n}computeAmbientIntensity(t,e){return t.ambientColor.componentWiseMul(e.ambientIntensity)}computeDiffuseIntensity(t,e,r,o){const s=e.position.sub(o).normalize(),n=Math.min(Math.max(r.dot(s),0),1);return t.diffuseColor.componentWiseMul(e.diffuseIntensity).mul(n)}computeSpecularIntensity(t,e,r,o){const s=e.position.sub(o).normalize(),n=r.mul(2*r.dot(s)).sub(s),i=o.mul(-1).normalize(),l=Math.pow(Math.max(n.dot(i),0),t.shininess);return t.specularColor.componentWiseMul(e.specularIntensity).mul(l)}}},9866:(t,e,r)=>{r.d(e,{_:()=>o});class o{ambientIntensity;diffuseIntensity;specularIntensity}},5084:(t,e,r)=>{r.d(e,{c:()=>s});var o=r(9866);class s extends o._{position}},5335:(t,e,r)=>{r.d(e,{F:()=>o});class o{ambientColor;diffuseColor;specularColor;emissiveColor;shininess}},4232:(t,e,r)=>{t.exports=r.p+"7ac69aefeb77efddca43.png"},4224:(t,e,r)=>{t.exports=r.p+"d3a35822a59e861527f4.jsx"}}]);
//# sourceMappingURL=1935.js.map