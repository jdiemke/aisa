"use strict";(self.webpackChunkaisa=self.webpackChunkaisa||[]).push([[2703],{2703:(t,e,r)=>{r.r(e),r.d(e,{Scene5:()=>c});var o=r(7574),i=r(6107),s=r(7401),n=r(9999),l=r(82),a=r(1762);class h extends n.p{razorLogo;torus=new i.K;renderingPipeline;init(t){return this.renderingPipeline=new a.M(t),this.renderingPipeline.setCullFace(o.u.BACK),Promise.all([l.O.load(r(44),!0).then((t=>this.razorLogo=t))])}render(t,e){this.drawTitanEffect(t,e),this.shadingTorus(t,.02*e),t.drawTexture(t.width/2-this.razorLogo.width/2,0,this.razorLogo,1)}shadingTorus(t,e){t.clearDepthBuffer();let r=s.C.constructYRotationMatrix(.05*e);r=r.multiplyMatrix(s.C.constructXRotationMatrix(.08*e)),r=s.C.constructTranslationMatrix(0,0,-24).multiplyMatrix(r),this.renderingPipeline.draw(t,this.torus.getMesh(),r)}drawTitanEffect(t,e){t.clear();const r=t.width/20,o=t.height/20;for(let i=0;i<r;i++)for(let r=0;r<o;r++){const o=(Math.sin(.004*e+.7*i+.4*r)+1)/2,s=2*Math.round(8*o+1),n=10-s/2|0,l=255<<24|85*o<<16|55*o<<8|55*o;t.drawBox2(20*i+n,20*r+n,s,s,l)}}}class c{TorusScene;init(t){return this.TorusScene=new h,Promise.all([this.TorusScene.init(t)])}render(t,e){this.TorusScene.render(t,e)}}},312:(t,e,r)=>{r.d(e,{u:()=>i});var o=r(1829);class i{startColor=new o.I;colorSlope=new o.I;setup(t,e,r){this.colorSlope.r=(e.r-t.r)/r,this.colorSlope.g=(e.g-t.g)/r,this.colorSlope.b=(e.b-t.b)/r,this.startColor.r=t.r,this.startColor.g=t.g,this.startColor.b=t.b}advance(){this.startColor.r+=this.colorSlope.r,this.startColor.g+=this.colorSlope.g,this.startColor.b+=this.colorSlope.b}}},5110:(t,e,r)=>{r.d(e,{_:()=>n});var o=r(3242),i=r(312),s=r(1417);class n extends o.Y{framebuffer;colorInterpolator1=new i.u;colorInterpolator2=new i.u;colorInterpolator3=new i.u;rowColorInterpolator=new i.u;leftSlope=new s.N;rightSlope=new s.N;constructor(t){super(),this.framebuffer=t}fillLongRightTriangle(t,e,r,o){this.leftSlope.setup(e,r),this.rightSlope.setup(e,o),this.colorInterpolator1.setup(e.color,r.color,this.leftSlope.yDistance),this.colorInterpolator2.setup(e.color,o.color,this.rightSlope.yDistance),this.drawSpan(t,this.leftSlope,this.colorInterpolator1,this.colorInterpolator2,this.leftSlope,this.rightSlope),this.leftSlope.setup(r,o),this.colorInterpolator3.setup(r.color,o.color,this.leftSlope.yDistance),this.drawSpan(t,this.leftSlope,this.colorInterpolator3,this.colorInterpolator2,this.leftSlope,this.rightSlope)}fillLongLeftTriangle(t,e,r,o){this.leftSlope.setup(e,o),this.rightSlope.setup(e,r),this.colorInterpolator2.setup(e.color,r.color,this.rightSlope.yDistance),this.colorInterpolator1.setup(e.color,o.color,this.leftSlope.yDistance),this.drawSpan(t,this.rightSlope,this.colorInterpolator1,this.colorInterpolator2,this.leftSlope,this.rightSlope),this.rightSlope.setup(r,o),this.colorInterpolator3.setup(r.color,o.color,this.rightSlope.yDistance),this.drawSpan(t,this.rightSlope,this.colorInterpolator1,this.colorInterpolator3,this.leftSlope,this.rightSlope)}drawSpan(t,e,r,o,i,s){let n=e.yStart;for(let l=0;l<e.yDistance;l++){const e=Math.round(s.currentX)-Math.round(i.currentX);this.rowColorInterpolator.setup(r.startColor,o.startColor,e);let l=Math.round(n)*t.width+Math.round(i.currentX);const a=(s.currentZ-i.currentZ)/e;let h=i.currentZ;for(let r=0;r<e;r++)h<t.wBuffer[l]&&(t.wBuffer[l]=h,t.framebuffer[l]=this.rowColorInterpolator.startColor.toPackedFormat()),l++,h+=a,this.rowColorInterpolator.advance();i.advance(),s.advance(),r.advance(),o.advance(),n++}}}},1417:(t,e,r)=>{r.d(e,{N:()=>o});class o{yDistance;slope;zslope;currentZ;currentX;yStart;setup(t,e){this.yDistance=e.projection.y-t.projection.y,this.slope=(e.projection.x-t.projection.x)/this.yDistance,this.zslope=(1/e.projection.z-1/t.projection.z)/this.yDistance,this.currentZ=1/t.projection.z,this.currentX=t.projection.x,this.yStart=t.projection.y}advance(){this.currentX+=this.slope,this.currentZ+=this.zslope}}},1762:(t,e,r)=>{r.d(e,{M:()=>u});var o=r(1829),i=r(7552),s=r(160),n=r(9166),l=r(5084),a=r(5335),h=r(7569),c=r(5787),p=r(5110);class u extends c.U{fog=null;lights=null;material=null;lighting=!0;color=o.I.WHITE;triangleRasterizer=null;clipper;projectedVertices=new Array(new i.l(0,0,0,1),new i.l(0,0,0,1),new i.l(0,0,0,1));vertexArray=new Array(new h.X,new h.X,new h.X);constructor(t){super(t),this.clipper=new s.m(t);const e=new l.c;e.ambientIntensity=new i.l(1,1,1,1),e.diffuseIntensity=new i.l(1,1,1,1),e.specularIntensity=new i.l(1,1,1,1),e.position=new i.l(3,0,-2,1);const r=new l.c;r.ambientIntensity=new i.l(0,0,1,1),r.diffuseIntensity=new i.l(0,.6,1,1),r.specularIntensity=new i.l(.8,.8,.8,1),r.position=new i.l(0,-380,-180,1),this.lights=[e,r];const o=new a.F;o.ambientColor=new i.l(.12,.14,.1,0),o.diffuseColor=new i.l(.38,.4,.4,1),o.specularColor=new i.l(.8,.5,.5,0),o.shininess=2,this.material=o,this.triangleRasterizer=new p._(t)}setFramebuffer(t){this.framebuffer=t}setFog(t){this.fog=t}setLights(t){this.lights=t}enableLighting(t){this.lighting=t}setMaterial(t){this.material=t}setColor(t){this.color=t}drawMeshArray(t,e,r){for(let o=0;o<e.length;o++){const i=e[o];this.draw(t,i,r)}}draw(t,e,r){const o=r.computeNormalMatrix();for(let t=0;t<e.normals.length;t++)o.multiplyHomArr(e.normals[t],e.transformedNormals[t]);for(let t=0;t<e.points.length;t++)r.multiplyHomArr(e.points[t],e.transformedPoints[t]);for(let r=0;r<e.faces.length;r++){const o=e.transformedPoints[e.faces[r].v1],i=e.transformedPoints[e.faces[r].v2],s=e.transformedPoints[e.faces[r].v3],n=e.transformedNormals[e.faces[r].n1],l=e.transformedNormals[e.faces[r].n2],a=e.transformedNormals[e.faces[r].n3];if(this.isInFrontOfNearPlane(o)&&this.isInFrontOfNearPlane(i)&&this.isInFrontOfNearPlane(s))this.project2(o,this.projectedVertices[0]),this.project2(i,this.projectedVertices[1]),this.project2(s,this.projectedVertices[2]),this.vertexArray[0].position=o,this.vertexArray[0].projection=this.projectedVertices[0],this.vertexArray[0].normal=n,this.vertexArray[1].position=i,this.vertexArray[1].projection=this.projectedVertices[1],this.vertexArray[1].normal=l,this.vertexArray[2].position=s,this.vertexArray[2].projection=this.projectedVertices[2],this.vertexArray[2].normal=a,this.renderConvexPolygon(t,this.vertexArray,!0);else{if(!(this.isInFrontOfNearPlane(o)||this.isInFrontOfNearPlane(i)||this.isInFrontOfNearPlane(s)))continue;{this.vertexArray[0].position=o,this.vertexArray[1].position=i,this.vertexArray[2].position=s,this.lighting?(this.vertexArray[0].color=this.computeColor(n,o),this.vertexArray[1].color=this.computeColor(l,i),this.vertexArray[2].color=this.computeColor(a,s)):(this.vertexArray[0].color=this.color,this.vertexArray[1].color=this.color,this.vertexArray[2].color=this.color);const e=this.zClipTriangle(this.vertexArray);if(e.length<3)return;for(let t=0;t<e.length;t++)e[t].projection=this.project(e[t].position);this.renderConvexPolygon(t,e,!1)}}}}project(t){return new i.l(Math.round(this.framebuffer.width/2+292*t.x/-t.z),Math.round(this.framebuffer.height/2-292*t.y/-t.z),t.z)}project2(t,e){e.x=Math.round(this.framebuffer.width/2+292*t.x/-t.z),e.y=Math.round(this.framebuffer.height/2-292*t.y/-t.z),e.z=t.z}computeNearPlaneIntersection(t,e){const r=(this.NEAR_PLANE_Z-t.position.z)/(e.position.z-t.position.z),o=new h.X;return o.position=new i.l(r*(e.position.x-t.position.x)+t.position.x,r*(e.position.y-t.position.y)+t.position.y,this.NEAR_PLANE_Z),o.color=e.color.sub(t.color).mul(r).add(t.color),o}zClipTriangle(t){const e=t,r=new Array;let o=e[e.length-1];for(let t=0;t<e.length;t++){const i=e[t];this.isInFrontOfNearPlane(i.position)?(this.isInFrontOfNearPlane(o.position)||r.push(this.computeNearPlaneIntersection(o,i)),r.push(i)):this.isInFrontOfNearPlane(o.position)&&r.push(this.computeNearPlaneIntersection(o,i)),o=i}return r}renderConvexPolygon(t,e,r=!1){if(3===e.length&&!this.isTriangleCCW(e[0].projection,e[1].projection,e[2].projection))return;if(r&&(this.lighting?(this.vertexArray[0].color=this.computeColor(this.vertexArray[0].normal,this.vertexArray[0].position),this.vertexArray[1].color=this.computeColor(this.vertexArray[1].normal,this.vertexArray[1].position),this.vertexArray[2].color=this.computeColor(this.vertexArray[2].normal,this.vertexArray[2].position)):(this.vertexArray[0].color=this.color,this.vertexArray[1].color=this.color,this.vertexArray[2].color=this.color)),4===e.length&&!this.isTriangleCCW2(e[0].projection,e[1].projection,e[2].projection,e[3].projection))return;const o=this.clipper.clipConvexPolygon(e);o.length<3||this.triangulateConvexPolygon(t,o)}triangulateConvexPolygon(t,e){for(let r=0;r<e.length-2;r++)this.triangleRasterizer.drawTriangleDDA(t,e[0],e[1+r],e[2+r])}computeColor(t,e){let r=(new n.R).computeColor(this.material,this.lights,t,e);return null!==this.fog&&(r=this.fog.computeVertexColor(r,e)),new o.I(Math.min(255,255*r.x),Math.min(255,255*r.y),Math.min(255,255*r.z),255)}}},160:(t,e,r)=>{r.d(e,{m:()=>l});var o=r(9137),i=r(477),s=r(6076),n=r(9936);class l{framebuffer;clipRegion;constructor(t){this.framebuffer=t,this.clipRegion=new Array(new o.N(t),new i.c(t),new s.$(t),new n.E(t))}clipConvexPolygon(t){let e=t;for(let t=0;t<this.clipRegion.length;t++){const r=this.clipRegion[t],o=e;e=new Array;let i=o[o.length-1];for(let t=0;t<o.length;t++){const s=o[t];r.isInside(s)?(r.isInside(i)||e.push(r.computeIntersection(i,s)),e.push(s)):r.isInside(i)&&e.push(r.computeIntersection(i,s)),i=s}}return e}}},9166:(t,e,r)=>{r.d(e,{R:()=>i});var o=r(7552);class i{computeColor(t,e,r,i){let s=new o.l(0,0,0);for(let o=0;o<e.length;o++){const n=e[o],l=this.computeAmbientIntensity(t,n),a=this.computeDiffuseIntensity(t,n,r,i),h=this.computeSpecularIntensity(t,n,r,i);s=s.add(l).add(a).add(h)}return s}computeAmbientIntensity(t,e){return t.ambientColor.componentWiseMul(e.ambientIntensity)}computeDiffuseIntensity(t,e,r,o){const i=e.position.sub(o).normalize(),s=Math.min(Math.max(r.dot(i),0),1);return t.diffuseColor.componentWiseMul(e.diffuseIntensity).mul(s)}computeSpecularIntensity(t,e,r,o){const i=e.position.sub(o).normalize(),s=r.mul(2*r.dot(i)).sub(i),n=o.mul(-1).normalize(),l=Math.pow(Math.max(s.dot(n),0),t.shininess);return t.specularColor.componentWiseMul(e.specularIntensity).mul(l)}}},9866:(t,e,r)=>{r.d(e,{_:()=>o});class o{ambientIntensity;diffuseIntensity;specularIntensity}},5084:(t,e,r)=>{r.d(e,{c:()=>i});var o=r(9866);class i extends o._{position}},5335:(t,e,r)=>{r.d(e,{F:()=>o});class o{ambientColor;diffuseColor;specularColor;emissiveColor;shininess}},44:(t,e,r)=>{t.exports=r.p+"d3132c4de2ae05ba66ad.png"}}]);
//# sourceMappingURL=2703.js.map