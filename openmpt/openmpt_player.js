!function(){function e(e,t,n,o){var i,p,a,r=this;function l(e){var t=new Int8Array(e),n=libopenmpt._malloc(t.byteLength);function o(e){var t=stackAlloc(e.length+1);return writeAsciiToMemory(e,t),t}libopenmpt.HEAPU8.set(t,n),i=libopenmpt._openmpt_module_create_from_memory(n,t.byteLength,0,0,0),p=libopenmpt._malloc(16384),a=libopenmpt._malloc(16384);var l=stackSave();libopenmpt._openmpt_module_ctl_set(i,o("render.resampler.emulate_amiga"),o("1")),libopenmpt._openmpt_module_ctl_set(i,o("render.resampler.emulate_amiga_type"),o("a1200")),stackRestore(l),r.duration=libopenmpt._openmpt_module_get_duration_seconds(i)}n||(n={}),o||(o={}),this.cleanup=function(){i&&libopenmpt._openmpt_module_destroy(i),p&&libopenmpt._free(p),a&&libopenmpt._free(a)},this.load=function(t){var o=this;!function(e){if(!n.pathToLibOpenMPT)throw"pathToLibOpenMPT not specified";if(window.libopenmpt&&window.libopenmpt._openmpt_module_create_from_memory)e();else{var t=document.getElementsByTagName("head")[0],o=document.createElement("script");o.src=n.pathToLibOpenMPT,window.libopenmpt={onRuntimeInitialized:function(){e(),t.removeChild(o)}},t.appendChild(o)}}((function(){o.channelCount=2;var n=new XMLHttpRequest;n.addEventListener("error",(function(e){console.log("XHR error",e)})),n.addEventListener("load",(function(e){data=n.response,l(data),t()})),n.open("GET",e,!0),n.responseType="arraybuffer",n.send()}))},this.generateAudio=function(e){for(var n=e.getChannelData(0),o=e.getChannelData(1),r=e.length,l=0;r>0;){for(var m=Math.min(r,4096),s=libopenmpt._openmpt_module_read_float_stereo(i,t.sampleRate,m,p,a),_=libopenmpt.HEAPF32.subarray(p/4,p/4+s),u=libopenmpt.HEAPF32.subarray(a/4,a/4+s),c=0;c<s;++c)n[l+c]=_[c],o[l+c]=u[c];if(r-=s,l+=s,s<m)break}return l},this.seekable=!0,this.seek=function(e){libopenmpt._openmpt_module_set_position_seconds(i,e)},this.reset=function(){this.seek(0)}}Cowbell.Player.OpenMPT=function(t){return new Cowbell.Common.WebAudioPlayer(e,t)}}();