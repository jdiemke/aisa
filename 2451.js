"use strict";(self.webpackChunkaisa=self.webpackChunkaisa||[]).push([[2451],{5710:(t,e,r)=>{r.d(e,{H:()=>s});var o=r(7552),n=r(6075),i=r(7758);class s{static parse(t,e=!1){const r=[];return t.forEach((t=>{const n=new Array,i=new Array;t.vertices.forEach((t=>{n.push(new o.l(t.x,t.y,t.z).mul(1))})),t.normals.forEach((t=>{i.push(e?new o.l(t.x,t.y,t.z).normalize().mul(-1):new o.l(t.x,t.y,t.z).normalize())}));const s=[];t.faces.forEach((t=>{s.push({n1:t.normals[0],n2:t.normals[1],n3:t.normals[2],v1:t.vertices[0],v2:t.vertices[1],v3:t.vertices[2]})}));const l={faces:s,normals:i,points:n,transformedNormals:i.map((()=>new o.l(0,0,0,0))),transformedPoints:n.map((()=>new o.l(0,0,0,0)))};r.push(l)})),r}static getBlenderScene(t,e=!0){const r=[];return t.forEach((t=>{const s=new Array,l=new Array;let a;t.uv&&(a=[],t.uv.forEach((t=>{const e=new n.l;e.u=t.u,e.v=1-t.v,a.push(e)}))),t.vertices.forEach((t=>{e?s.push(new o.l(t.x,t.y,t.z).mul(2).add(new o.l(0,-2.7,0,0))):s.push(new o.l(t.x,t.y,t.z).mul(2))})),t.normals.forEach((t=>{l.push(new o.l(t.x,t.y,t.z))}));const h=(new i.o).computeBoundingSphere(s);h.getCenter().w=1;const c={points:s,normals:l,uv:a,faces:t.faces,points2:s.map((()=>new o.l(0,0,0,0))),normals2:l.map((()=>new o.l(0,0,0,0))),boundingSphere:h,name:t.name};r.push(c)})),r}}},2451:(t,e,r)=>{r.r(e),r.d(e,{Scene17:()=>m});var o=r(7574),n=r(7401),i=r(6852),s=r(9293),l=r(9999),a=r(82),h=r(8931),c=r(518),p=r(3362),u=r(1762),f=r(4737);class d extends l.p{blurred;lab2;noise;particleTexture2;spaceLabMesh;hoodlumLogoMesh;accumulationBuffer;texturedRenderingPipeline;renderingPipeline;init(t){return this.texturedRenderingPipeline=new p.W(t),this.renderingPipeline=new u.M(t),this.accumulationBuffer=new Uint32Array(t.width*t.height),Promise.all([a.O.load(r(4232),!1).then((t=>this.blurred=t)),c.v.loadWithTexture(r(3816)).then((t=>this.spaceLabMesh=t)),c.v.load(r(955)).then((t=>this.hoodlumLogoMesh=t)),a.O.load(r(9365),!1).then((t=>this.lab2=t)),a.O.generateProceduralNoise().then((t=>this.noise=t)),this.createProceduralTexture3().then((t=>this.particleTexture2=t))])}render(t,e){this.texturedRenderingPipeline.setCullFace(o.u.BACK),t.setCullFace(o.u.BACK),t.drawScaledTextureClipBi(0,0,t.width,t.height,this.blurred,1),t.setCullFace(o.u.BACK),t.setTexture(this.lab2),this.drawBlenderScene9(t,e,this.particleTexture2);const r=new h.x(this.accumulationBuffer,t.width,t.height);t.drawTexture(0,0,r,.75),t.fastFramebufferCopy(this.accumulationBuffer,t.framebuffer),t.noise(e,this.noise)}drawBlenderScene9(t,e,r){t.clearDepthBuffer();const o=n.C.constructTranslationMatrix(0,0,7*(.5*Math.sin(7e-5*e)+.5)-34).multiplyMatrix(n.C.constructXRotationMatrix(.5*(.5*Math.sin(14e-5*e)+.5)-.2).multiplyMatrix(n.C.constructYRotationMatrix(2e-4*-e).multiplyMatrix(n.C.constructTranslationMatrix(0,1.9,0))));let s=o.multiplyMatrix(n.C.constructScaleMatrix(13,13,13));this.texturedRenderingPipeline.setModelViewMatrix(s),this.texturedRenderingPipeline.drawMeshArray(t,this.spaceLabMesh),s=o.multiplyMatrix(n.C.constructTranslationMatrix(0,-5.5,0).multiplyMatrix(n.C.constructScaleMatrix(413,413,413).multiplyMatrix(n.C.constructXRotationMatrix(.5*Math.PI))));const l=this.hoodlumLogoMesh[0];this.renderingPipeline.draw(t,l,s);const a=new Array;for(let t=0;t<10;t++)for(let r=0;r<6;r++){const o=(t+.001*e)%10*2.5-12,n=(1+4*f.p.interpolate(-10,10,o))*(.5*(.5*Math.sin(.0012*e+2*Math.PI/10*t*2)+.5)+.5),s=n*Math.sin(2*Math.PI/6*r+8e-4*e),l=n*Math.cos(2*Math.PI/6*r+8e-4*e);a.push(new i.r(s,o,l))}const h=o.multiplyMatrix(n.C.constructTranslationMatrix(0,-0,0)),c=new Array(a.length);a.forEach((e=>{const r=t.project(h.multiply(e));c.push(r)})),c.sort(((t,e)=>t.z-e.z)),c.forEach((e=>{const o=192*-4.3/e.z;t.drawSoftParticle(Math.round(e.x-o/2),Math.round(e.y-o/2),Math.round(o),Math.round(o),r,1/e.z,.7)}))}createProceduralTexture3(){return new Promise((t=>{const e=new h.x;e.texture=new Uint32Array(65536),(new s.Z).setSeed(100);for(let t=0;t<256;t++)for(let r=0;r<256;r++){const o=127-r,n=127-t,i=Math.sqrt(o*o+n*n)/127;let s=1-i;s*=s*s,i>1&&(s=0),s=Math.min(1,2.9*s),e.texture[r+256*t]=15466475|255*s<<24}e.width=256,e.height=256,t(e)}))}}class m{HoodlumScene;init(t){return this.HoodlumScene=new d,Promise.all([this.HoodlumScene.init(t)])}render(t,e){this.HoodlumScene.render(t,e)}}},7758:(t,e,r)=>{r.d(e,{o:()=>i});var o=r(7552),n=r(6653);class i{computeBoundingSphere(t){if(0===t.length)throw new Error("More than one vertex required.");if(1===t.length)return new n.a(t[0],0);let e=new o.l(0,0,0,0),r=0;return t.forEach((t=>{e=e.add(new o.l(t.x,t.y,t.z,0))})),e=e.mul(1/t.length),t.forEach((t=>{r=Math.max(r,e.sub(t).length())})),new n.a(e,r)}}},6653:(t,e,r)=>{r.d(e,{a:()=>o});class o{center;radius;constructor(t,e){this.center=t,this.radius=e}isInsidePositiveHalfSpace(t){return t.getNormal().dot(this.center)-t.getDistance()>-this.radius}getTran(t){return t.multiplyHom(this.center)}getRadius(){return this.radius}getCenter(){return this.center}}},518:(t,e,r)=>{r.d(e,{v:()=>n});var o=r(5710);class n{static load(t){return fetch(t).then((t=>t.json())).then((t=>o.H.parse(t)))}static loadWithTexture(t){return fetch(t).then((t=>t.json())).then((t=>o.H.getBlenderScene(t,!1)))}constructor(){}}},312:(t,e,r)=>{r.d(e,{u:()=>n});var o=r(1829);class n{startColor=new o.I;colorSlope=new o.I;setup(t,e,r){this.colorSlope.r=(e.r-t.r)/r,this.colorSlope.g=(e.g-t.g)/r,this.colorSlope.b=(e.b-t.b)/r,this.startColor.r=t.r,this.startColor.g=t.g,this.startColor.b=t.b}advance(){this.startColor.r+=this.colorSlope.r,this.startColor.g+=this.colorSlope.g,this.startColor.b+=this.colorSlope.b}}},5110:(t,e,r)=>{r.d(e,{_:()=>s});var o=r(3242),n=r(312),i=r(1417);class s extends o.Y{framebuffer;colorInterpolator1=new n.u;colorInterpolator2=new n.u;colorInterpolator3=new n.u;rowColorInterpolator=new n.u;leftSlope=new i.N;rightSlope=new i.N;constructor(t){super(),this.framebuffer=t}fillLongRightTriangle(t,e,r,o){this.leftSlope.setup(e,r),this.rightSlope.setup(e,o),this.colorInterpolator1.setup(e.color,r.color,this.leftSlope.yDistance),this.colorInterpolator2.setup(e.color,o.color,this.rightSlope.yDistance),this.drawSpan(t,this.leftSlope,this.colorInterpolator1,this.colorInterpolator2,this.leftSlope,this.rightSlope),this.leftSlope.setup(r,o),this.colorInterpolator3.setup(r.color,o.color,this.leftSlope.yDistance),this.drawSpan(t,this.leftSlope,this.colorInterpolator3,this.colorInterpolator2,this.leftSlope,this.rightSlope)}fillLongLeftTriangle(t,e,r,o){this.leftSlope.setup(e,o),this.rightSlope.setup(e,r),this.colorInterpolator2.setup(e.color,r.color,this.rightSlope.yDistance),this.colorInterpolator1.setup(e.color,o.color,this.leftSlope.yDistance),this.drawSpan(t,this.rightSlope,this.colorInterpolator1,this.colorInterpolator2,this.leftSlope,this.rightSlope),this.rightSlope.setup(r,o),this.colorInterpolator3.setup(r.color,o.color,this.rightSlope.yDistance),this.drawSpan(t,this.rightSlope,this.colorInterpolator1,this.colorInterpolator3,this.leftSlope,this.rightSlope)}drawSpan(t,e,r,o,n,i){let s=e.yStart;for(let l=0;l<e.yDistance;l++){const e=Math.round(i.currentX)-Math.round(n.currentX);this.rowColorInterpolator.setup(r.startColor,o.startColor,e);let l=Math.round(s)*t.width+Math.round(n.currentX);const a=(i.currentZ-n.currentZ)/e;let h=n.currentZ;for(let r=0;r<e;r++)h<t.wBuffer[l]&&(t.wBuffer[l]=h,t.framebuffer[l]=this.rowColorInterpolator.startColor.toPackedFormat()),l++,h+=a,this.rowColorInterpolator.advance();n.advance(),i.advance(),r.advance(),o.advance(),s++}}}},1417:(t,e,r)=>{r.d(e,{N:()=>o});class o{yDistance;slope;zslope;currentZ;currentX;yStart;setup(t,e){this.yDistance=e.projection.y-t.projection.y,this.slope=(e.projection.x-t.projection.x)/this.yDistance,this.zslope=(1/e.projection.z-1/t.projection.z)/this.yDistance,this.currentZ=1/t.projection.z,this.currentX=t.projection.x,this.yStart=t.projection.y}advance(){this.currentX+=this.slope,this.currentZ+=this.zslope}}},1762:(t,e,r)=>{r.d(e,{M:()=>u});var o=r(1829),n=r(7552),i=r(160),s=r(9166),l=r(5084),a=r(5335),h=r(7569),c=r(5787),p=r(5110);class u extends c.U{fog=null;lights=null;material=null;lighting=!0;color=o.I.WHITE;triangleRasterizer=null;clipper;projectedVertices=new Array(new n.l(0,0,0,1),new n.l(0,0,0,1),new n.l(0,0,0,1));vertexArray=new Array(new h.X,new h.X,new h.X);constructor(t){super(t),this.clipper=new i.m(t);const e=new l.c;e.ambientIntensity=new n.l(1,1,1,1),e.diffuseIntensity=new n.l(1,1,1,1),e.specularIntensity=new n.l(1,1,1,1),e.position=new n.l(3,0,-2,1);const r=new l.c;r.ambientIntensity=new n.l(0,0,1,1),r.diffuseIntensity=new n.l(0,.6,1,1),r.specularIntensity=new n.l(.8,.8,.8,1),r.position=new n.l(0,-380,-180,1),this.lights=[e,r];const o=new a.F;o.ambientColor=new n.l(.12,.14,.1,0),o.diffuseColor=new n.l(.38,.4,.4,1),o.specularColor=new n.l(.8,.5,.5,0),o.shininess=2,this.material=o,this.triangleRasterizer=new p._(t)}setFramebuffer(t){this.framebuffer=t}setFog(t){this.fog=t}setLights(t){this.lights=t}enableLighting(t){this.lighting=t}setMaterial(t){this.material=t}setColor(t){this.color=t}drawMeshArray(t,e,r){for(let o=0;o<e.length;o++){const n=e[o];this.draw(t,n,r)}}draw(t,e,r){const o=r.computeNormalMatrix();for(let t=0;t<e.normals.length;t++)o.multiplyHomArr(e.normals[t],e.transformedNormals[t]);for(let t=0;t<e.points.length;t++)r.multiplyHomArr(e.points[t],e.transformedPoints[t]);for(let r=0;r<e.faces.length;r++){const o=e.transformedPoints[e.faces[r].v1],n=e.transformedPoints[e.faces[r].v2],i=e.transformedPoints[e.faces[r].v3],s=e.transformedNormals[e.faces[r].n1],l=e.transformedNormals[e.faces[r].n2],a=e.transformedNormals[e.faces[r].n3];if(this.isInFrontOfNearPlane(o)&&this.isInFrontOfNearPlane(n)&&this.isInFrontOfNearPlane(i))this.project2(o,this.projectedVertices[0]),this.project2(n,this.projectedVertices[1]),this.project2(i,this.projectedVertices[2]),this.vertexArray[0].position=o,this.vertexArray[0].projection=this.projectedVertices[0],this.vertexArray[0].normal=s,this.vertexArray[1].position=n,this.vertexArray[1].projection=this.projectedVertices[1],this.vertexArray[1].normal=l,this.vertexArray[2].position=i,this.vertexArray[2].projection=this.projectedVertices[2],this.vertexArray[2].normal=a,this.renderConvexPolygon(t,this.vertexArray,!0);else{if(!(this.isInFrontOfNearPlane(o)||this.isInFrontOfNearPlane(n)||this.isInFrontOfNearPlane(i)))continue;{this.vertexArray[0].position=o,this.vertexArray[1].position=n,this.vertexArray[2].position=i,this.lighting?(this.vertexArray[0].color=this.computeColor(s,o),this.vertexArray[1].color=this.computeColor(l,n),this.vertexArray[2].color=this.computeColor(a,i)):(this.vertexArray[0].color=this.color,this.vertexArray[1].color=this.color,this.vertexArray[2].color=this.color);const e=this.zClipTriangle(this.vertexArray);if(e.length<3)return;for(let t=0;t<e.length;t++)e[t].projection=this.project(e[t].position);this.renderConvexPolygon(t,e,!1)}}}}project(t){return new n.l(Math.round(this.framebuffer.width/2+292*t.x/-t.z),Math.round(this.framebuffer.height/2-292*t.y/-t.z),t.z)}project2(t,e){e.x=Math.round(this.framebuffer.width/2+292*t.x/-t.z),e.y=Math.round(this.framebuffer.height/2-292*t.y/-t.z),e.z=t.z}computeNearPlaneIntersection(t,e){const r=(this.NEAR_PLANE_Z-t.position.z)/(e.position.z-t.position.z),o=new h.X;return o.position=new n.l(r*(e.position.x-t.position.x)+t.position.x,r*(e.position.y-t.position.y)+t.position.y,this.NEAR_PLANE_Z),o.color=e.color.sub(t.color).mul(r).add(t.color),o}zClipTriangle(t){const e=t,r=new Array;let o=e[e.length-1];for(let t=0;t<e.length;t++){const n=e[t];this.isInFrontOfNearPlane(n.position)?(this.isInFrontOfNearPlane(o.position)||r.push(this.computeNearPlaneIntersection(o,n)),r.push(n)):this.isInFrontOfNearPlane(o.position)&&r.push(this.computeNearPlaneIntersection(o,n)),o=n}return r}renderConvexPolygon(t,e,r=!1){if(3===e.length&&!this.isTriangleCCW(e[0].projection,e[1].projection,e[2].projection))return;if(r&&(this.lighting?(this.vertexArray[0].color=this.computeColor(this.vertexArray[0].normal,this.vertexArray[0].position),this.vertexArray[1].color=this.computeColor(this.vertexArray[1].normal,this.vertexArray[1].position),this.vertexArray[2].color=this.computeColor(this.vertexArray[2].normal,this.vertexArray[2].position)):(this.vertexArray[0].color=this.color,this.vertexArray[1].color=this.color,this.vertexArray[2].color=this.color)),4===e.length&&!this.isTriangleCCW2(e[0].projection,e[1].projection,e[2].projection,e[3].projection))return;const o=this.clipper.clipConvexPolygon(e);o.length<3||this.triangulateConvexPolygon(t,o)}triangulateConvexPolygon(t,e){for(let r=0;r<e.length-2;r++)this.triangleRasterizer.drawTriangleDDA(t,e[0],e[1+r],e[2+r])}computeColor(t,e){let r=(new s.R).computeColor(this.material,this.lights,t,e);return null!==this.fog&&(r=this.fog.computeVertexColor(r,e)),new o.I(Math.min(255,255*r.x),Math.min(255,255*r.y),Math.min(255,255*r.z),255)}}},160:(t,e,r)=>{r.d(e,{m:()=>l});var o=r(9137),n=r(477),i=r(6076),s=r(9936);class l{framebuffer;clipRegion;constructor(t){this.framebuffer=t,this.clipRegion=new Array(new o.N(t),new n.c(t),new i.$(t),new s.E(t))}clipConvexPolygon(t){let e=t;for(let t=0;t<this.clipRegion.length;t++){const r=this.clipRegion[t],o=e;e=new Array;let n=o[o.length-1];for(let t=0;t<o.length;t++){const i=o[t];r.isInside(i)?(r.isInside(n)||e.push(r.computeIntersection(n,i)),e.push(i)):r.isInside(n)&&e.push(r.computeIntersection(n,i)),n=i}}return e}}},9166:(t,e,r)=>{r.d(e,{R:()=>n});var o=r(7552);class n{computeColor(t,e,r,n){let i=new o.l(0,0,0);for(let o=0;o<e.length;o++){const s=e[o],l=this.computeAmbientIntensity(t,s),a=this.computeDiffuseIntensity(t,s,r,n),h=this.computeSpecularIntensity(t,s,r,n);i=i.add(l).add(a).add(h)}return i}computeAmbientIntensity(t,e){return t.ambientColor.componentWiseMul(e.ambientIntensity)}computeDiffuseIntensity(t,e,r,o){const n=e.position.sub(o).normalize(),i=Math.min(Math.max(r.dot(n),0),1);return t.diffuseColor.componentWiseMul(e.diffuseIntensity).mul(i)}computeSpecularIntensity(t,e,r,o){const n=e.position.sub(o).normalize(),i=r.mul(2*r.dot(n)).sub(n),s=o.mul(-1).normalize(),l=Math.pow(Math.max(i.dot(s),0),t.shininess);return t.specularColor.componentWiseMul(e.specularIntensity).mul(l)}}},9866:(t,e,r)=>{r.d(e,{_:()=>o});class o{ambientIntensity;diffuseIntensity;specularIntensity}},5084:(t,e,r)=>{r.d(e,{c:()=>n});var o=r(9866);class n extends o._{position}},5335:(t,e,r)=>{r.d(e,{F:()=>o});class o{ambientColor;diffuseColor;specularColor;emissiveColor;shininess}},4232:(t,e,r)=>{t.exports=r.p+"7ac69aefeb77efddca43.png"},955:(t,e,r)=>{t.exports=r.p+"362cf30681aa40b46d21.jsx"},3816:(t,e,r)=>{t.exports=r.p+"8eb469a522c3ae4c7819.jsx"},9365:(t,e,r)=>{t.exports=r.p+"be59e5e60b44dcb4bb1c.png"}}]);
//# sourceMappingURL=2451.js.map